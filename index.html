<!-- Sidebar com apps -->
<div id="sidebar" aria-label="Navega√ß√£o de aplicativos">
  <button class="app-btn" data-app="browser">üåê Navegador</button>
  <button class="app-btn" data-app="soundcloud">üéµ SoundCloud</button>
  <button class="app-btn" data-app="notes">üìù Notas</button>
  <button class="app-btn" data-app="calculator">üßÆ Calculadora</button>
  <button class="app-btn" data-app="todo">‚úÖ To-Do List</button>
  <button class="app-btn" data-app="weather">‚òÅÔ∏è Clima</button>
  <button class="app-btn" data-app="dictionary">üìö Dicion√°rio</button>
</div>

<!-- Container geral -->
<div id="app-container" style="display:none; flex-direction: column; height: 100vh;">
  <button id="back-to-chat">‚Üê Voltar para Chat</button>
  <div id="app-content" style="flex:1; overflow:auto;"></div>
</div>

<script>
  const appContent = document.getElementById('app-content');
  const appContainer = document.getElementById('app-container');
  const sidebar = document.getElementById('sidebar');
  const chatSection = document.getElementById('chat-container'); // seu container de chat
  const inputArea = document.getElementById('input-area');
  const backBtn = document.getElementById('back-to-chat');

  function openApp(app) {
    sidebar.style.display = 'none';
    chatSection.style.display = 'none';
    inputArea.style.display = 'none';
    appContainer.style.display = 'flex';
    appContent.innerHTML = ''; // limpa o conte√∫do

    switch(app) {
      case 'browser':
        appContent.innerHTML = `<iframe src="https://www.google.com" style="border:none; width:100%; height:100vh;"></iframe>`;
        break;
      case 'soundcloud':
        appContent.innerHTML = `
          <iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"
            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/293">
          </iframe>
          <p>Pesquise e ou√ßa suas m√∫sicas favoritas!</p>`;
        break;
      case 'notes':
        appContent.innerHTML = `
          <textarea id="notes" style="width:100%; height:90vh; background:#111827; color:#bbf7d0; font-family: 'Orbitron', monospace;"></textarea>`;
        break;
      case 'calculator':
        appContent.innerHTML = `
          <input id="calc-input" style="width:100%; font-size:1.2rem; padding:10px; background:#1f2937; color:#bbf7d0; border:none; border-radius:10px;" placeholder="Digite c√°lculo, ex: 2+2*3" />
          <button id="calc-btn" style="margin-top:10px; padding:10px; background:#22d3ee; color:#0a0a0f; border:none; border-radius:10px; font-weight:700;">Calcular</button>
          <div id="calc-result" style="margin-top:15px; font-size:1.5rem; font-weight:700;"></div>
        `;
        document.getElementById('calc-btn').onclick = () => {
          try {
            const val = eval(document.getElementById('calc-input').value);
            document.getElementById('calc-result').textContent = val;
          } catch {
            document.getElementById('calc-result').textContent = 'Erro no c√°lculo';
          }
        };
        break;
      case 'todo':
        appContent.innerHTML = `
          <input id="todo-input" placeholder="Adicionar tarefa" style="width:100%; padding:10px; background:#1f2937; color:#bbf7d0; border:none; border-radius:10px;" />
          <button id="todo-add" style="margin-top:10px; padding:10px; background:#22d3ee; color:#0a0a0f; border:none; border-radius:10px; font-weight:700;">Adicionar</button>
          <ul id="todo-list" style="margin-top:15px; list-style:none; padding-left:0;"></ul>
        `;
        const todoInput = document.getElementById('todo-input');
        const todoAdd = document.getElementById('todo-add');
        const todoList = document.getElementById('todo-list');
        todoAdd.onclick = () => {
          const task = todoInput.value.trim();
          if(task) {
            const li = document.createElement('li');
            li.textContent = task;
            li.style.padding = '8px';
            li.style.borderBottom = '1px solid #334155';
            todoList.appendChild(li);
            todoInput.value = '';
          }
        };
        break;
      case 'weather':
        appContent.innerHTML = `
          <input id="city-input" placeholder="Digite cidade" style="width:100%; padding:10px; background:#1f2937; color:#bbf7d0; border:none; border-radius:10px;" />
          <button id="weather-btn" style="margin-top:10px; padding:10px; background:#22d3ee; color:#0a0a0f; border:none; border-radius:10px; font-weight:700;">Buscar clima</button>
          <div id="weather-result" style="margin-top:15px; font-size:1.2rem;"></div>
        `;

        document.getElementById('weather-btn').onclick = async () => {
          const city = document.getElementById('city-input').value.trim();
          if (!city) return;
          const apiKey = 'SUA_API_OPENWEATHERMAP'; // Troque aqui
          const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${apiKey}&units=metric&lang=pt_br`;
          const resultDiv = document.getElementById('weather-result');
          resultDiv.textContent = 'Buscando...';
          try {
            const res = await fetch(url);
            if(!res.ok) throw new Error('Cidade n√£o encontrada');
            const data = await res.json();
            resultDiv.textContent = `Clima em ${data.name}: ${data.weather[0].description}, Temp: ${data.main.temp}¬∞C`;
          } catch (e) {
            resultDiv.textContent = e.message;
          }
        };
        break;
      case 'dictionary':
        appContent.innerHTML = `
          <input id="dict-input" placeholder="Buscar palavra" style="width:100%; padding:10px; background:#1f2937; color:#bbf7d0; border:none; border-radius:10px;" />
          <button id="dict-btn" style="margin-top:10px; padding:10px; background:#22d3ee; color:#0a0a0f; border:none; border-radius:10px; font-weight:700;">Buscar</button>
          <div id="dict-result" style="margin-top:15px; font-size:1rem;"></div>
        `;

        document.getElementById('dict-btn').onclick = async () => {
          const word = document.getElementById('dict-input').value.trim();
          if (!word) return;
          const resultDiv = document.getElementById('dict-result');
          resultDiv.textContent = 'Buscando...';
          try {
            const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(word)}`);
            if(!res.ok) throw new Error('Palavra n√£o encontrada');
            const data = await res.json();
            let definitions = data[0].meanings.map(m => m.definitions[0].definition).join('<br><br>');
            resultDiv.innerHTML = `<strong>${data[0].word}</strong>:<br>${definitions}`;
          } catch (e) {
            resultDiv.textContent = e.message;
          }
        };
        break;

      default:
        appContent.innerHTML = `<p>App n√£o encontrado</p>`;
    }
  }

  backBtn.onclick = () => {
    appContainer.style.display = 'none';
    sidebar.style.display = 'flex';
    chatSection.style.display = 'block';
    inputArea.style.display = 'flex';
  };

  // Exemplo: abrir navegador quando clicar
  document.querySelectorAll('.app-btn').forEach(btn =>
    btn.addEventListener('click', () => openApp(btn.dataset.app))
  );
</script>
