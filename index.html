<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kai Chatbot Freemium</title>
<style>
  /* Futurista Minimalista Dark Theme */
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    background: #0a0a0f;
    color: #c0c0c0;
    font-family: 'Orbitron', monospace, sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }
  #chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 1rem 1.5rem;
    overflow-y: auto;
    gap: 0.7rem;
  }
  .message {
    max-width: 70%;
    padding: 0.6rem 1rem;
    border-radius: 15px;
    word-wrap: break-word;
    user-select: text;
    line-height: 1.3;
    font-size: 1rem;
  }
  .user {
    background: #1f2937;
    align-self: flex-end;
    color: #7dd3fc;
  }
  .bot {
    background: #111827;
    align-self: flex-start;
    color: #bbf7d0;
  }
  #input-area {
    display: flex;
    padding: 0.7rem 1rem;
    background: #111827;
    border-top: 1px solid #222;
  }
  #input-text {
    flex: 1;
    font-family: 'Orbitron', monospace, sans-serif;
    font-size: 1rem;
    padding: 0.6rem 1rem;
    border: none;
    border-radius: 9999px;
    background: #1f2937;
    color: #e0e0e0;
    outline-offset: 2px;
    outline-color: #38bdf8;
    transition: outline-color 0.3s ease;
  }
  #input-text:focus {
    outline-color: #22d3ee;
  }
  #send-btn {
    margin-left: 0.8rem;
    background: #22d3ee;
    border: none;
    border-radius: 9999px;
    color: #0a0a0f;
    font-weight: 700;
    cursor: pointer;
    padding: 0 1.2rem;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #send-btn:hover:not(:disabled) {
    background: #06b6d4;
  }
  #send-btn:disabled {
    background: #4b5563;
    cursor: not-allowed;
  }
  /* Banner fixo rodap√© */
  #banner-ad {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(90deg, #0f172a, #1e293b);
    border-top: 1px solid #334155;
    padding: 0.8rem 1rem;
    font-size: 1rem;
    color: #38bdf8;
    text-align: center;
    font-weight: 600;
    z-index: 999;
    user-select: none;
    font-family: 'Orbitron', monospace, sans-serif;
  }
  /* An√∫ncio de pausa */
  #ad-pause {
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: #1e293bdd;
    border: 2px solid #22d3ee;
    border-radius: 20px;
    width: 90%;
    max-width: 400px;
    padding: 1rem 1.5rem;
    color: #a5f3fc;
    font-size: 1.1rem;
    text-align: center;
    font-weight: 700;
    font-family: 'Orbitron', monospace, sans-serif;
    user-select: none;
    display: none;
    z-index: 1000;
    box-shadow: 0 0 10px #22d3eeaa;
  }
  /* Scrollbar minimalista */
  #chat-container::-webkit-scrollbar {
    width: 8px;
  }
  #chat-container::-webkit-scrollbar-thumb {
    background: #22d3eeaa;
    border-radius: 4px;
  }
  #chat-container::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Bot√£o toggle para compara√ß√£o */
  #toggle-plan-btn {
    display: block;
    margin: 1rem auto 0;
    background: #22d3ee;
    color: #0a0a0f;
    font-family: 'Orbitron', monospace, sans-serif;
    font-weight: 700;
    padding: 0.6rem 1.2rem;
    border: none;
    border-radius: 9999px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
    max-width: 280px;
    text-align: center;
    z-index: 1001;
  }
  #toggle-plan-btn:hover {
    background: #06b6d4;
  }

  /* Quadro de compara√ß√£o */
  #plan-comparison {
    max-width: 600px;
    margin: 1rem auto 2rem;
    padding: 1rem 1.5rem;
    background: #111827;
    border-radius: 15px;
    box-shadow: 0 0 15px #22d3eeaa;
    font-family: 'Orbitron', monospace, sans-serif;
    color: #c0c0c0;
    display: none; /* oculto inicialmente */
    z-index: 1000;
  }
  #plan-comparison h2 {
    text-align: center;
    color: #38bdf8;
    margin-bottom: 1rem;
    font-weight: 700;
  }
  #plan-comparison table {
    width: 100%;
    border-collapse: collapse;
  }
  #plan-comparison th, #plan-comparison td {
    padding: 0.6rem 0.8rem;
    border-bottom: 1px solid #334155;
    text-align: center;
  }
  #plan-comparison th {
    color: #22d3ee;
    font-weight: 700;
    font-size: 1.05rem;
  }
  #plan-comparison td {
    font-size: 0.95rem;
  }
  .check {
    color: #22c55e;
    font-weight: 900;
    font-size: 1.2rem;
  }
  .cross {
    color: #ef4444;
    font-weight: 900;
    font-size: 1.2rem;
  }
</style>
</head>
<body>

<!-- Bot√£o toggle -->
<button id="toggle-plan-btn" aria-expanded="false" aria-controls="plan-comparison" aria-label="Mostrar compara√ß√£o entre planos">
  Mostrar compara√ß√£o: Gratuito vs Premium
</button>

<!-- Quadro compara√ß√£o -->
<section id="plan-comparison" aria-label="Compara√ß√£o entre Modo Gratuito e Premium" role="region" tabindex="-1">
  <h2>Compara√ß√£o: Gratuito vs Premium</h2>
  <table role="table">
    <thead>
      <tr>
        <th>Recursos</th>
        <th>Gratuito</th>
        <th>Premium</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Limite de Mensagens</td>
        <td>20 por sess√£o</td>
        <td>Ilimitado</td>
      </tr>
      <tr>
        <td>Pausas para an√∫ncios</td>
        <td><span class="check">‚úî</span> a cada 8 mensagens</td>
        <td><span class="cross">‚úò</span> sem pausas</td>
      </tr>
      <tr>
        <td>Banner fixo</td>
        <td><span class="check">‚úî</span> no rodap√©</td>
        <td><span class="cross">‚úò</span> sem banner</td>
      </tr>
      <tr>
        <td>Acesso a comandos avan√ßados</td>
        <td><span class="cross">‚úò</span></td>
        <td><span class="check">‚úî</span></td>
      </tr>
      <tr>
        <td>Velocidade de resposta</td>
        <td>Normal</td>
        <td>R√°pida</td>
      </tr>
      <tr>
        <td>Suporte priorit√°rio</td>
        <td><span class="cross">‚úò</span></td>
        <td><span class="check">‚úî</span></td>
      </tr>
      <tr>
        <td>Personaliza√ß√£o do bot</td>
        <td><span class="cross">‚úò</span></td>
        <td><span class="check">‚úî</span></td>
      </tr>
    </tbody>
  </table>
</section>

<div id="chat-container" aria-live="polite" aria-label="√Årea de mensagens do Kai Chatbot">
  <!-- Mensagens aparecer√£o aqui -->
</div>

<div id="input-area">
  <input type="text" id="input-text" placeholder="Digite sua mensagem..." aria-label="Digite sua mensagem" autocomplete="off" />
  <button id="send-btn" aria-label="Enviar mensagem" disabled>Enviar</button>
</div>

<div id="banner-ad" aria-hidden="true">
  ‚ö° Vers√£o Freemium powered Studio Tsukiyo Platforms
</div>

<div id="ad-pause" role="alert" aria-live="assertive">
  üì¢ Pausa para an√∫ncio! Aproveite essa dica exclusiva:
  <div id="ad-content" style="margin-top:0.5rem; font-size:0.95rem; font-weight:400; color:#7dd3fc;">
    <!-- Conte√∫do do an√∫ncio aqui -->
  </div>
</div>

<script>
  // Configura√ß√µes b√°sicas
  const API_KEY = "COLE_SUA_API_KEY_AQUI"; // <<<---- COLE AQUI SUA API KEY DA SHAPES.INC

  const chatContainer = document.getElementById('chat-container');
  const inputText = document.getElementById('input-text');
  const sendBtn = document.getElementById('send-btn');
  const adPause = document.getElementById('ad-pause');
  const adContent = document.getElementById('ad-content');

  let conversationHistory = [];
  let messagesSinceLastAd = 0;
  const messagesPerAd = 8; // A cada 8 mensagens, pausa e exibe an√∫ncio
  const adDurationMs = 6000; // 6 segundos de an√∫ncio

  // Limita√ß√£o de fun√ß√µes da vers√£o Freemium
  // Por enquanto, limita intera√ß√µes a 20 mensagens por sess√£o.
  const maxMessages = 20;

  function appendMessage(text, sender) {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('message', sender);
    msgDiv.textContent = text;
    chatContainer.appendChild(msgDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  function canSend() {
    return inputText.value.trim().length > 0 && conversationHistory.length < maxMessages;
  }

  inputText.addEventListener('input', () => {
    sendBtn.disabled = !canSend();
  });

  sendBtn.addEventListener('click', () => {
    if (!canSend()) return;
    const userMsg = inputText.value.trim();
    inputText.value = '';
    sendBtn.disabled = true;
    addUserMessage(userMsg);
  });

  inputText.addEventListener('keydown', e => {
    if (e.key === 'Enter' && canSend()) {
      e.preventDefault();
      sendBtn.click();
    }
  });

  async function addUserMessage(text) {
    appendMessage(text, 'user');
    conversationHistory.push({ role: "user", content: text });
    messagesSinceLastAd++;

    if (conversationHistory.length >= maxMessages) {
      appendMessage("‚ö†Ô∏è Limite de mensagens da vers√£o Freemium atingido. Para continuar, atualize para Premium.", "bot");
      disableInput();
      return;
    }

    if (messagesSinceLastAd >= messagesPerAd) {
      await showAdPause();
      messagesSinceLastAd = 0;
    }

    await callApiAndAppendResponse();
  }

  async function callApiAndAppendResponse() {
    appendMessage("... digitando", "bot");
    try {
      const response = await fetch("https://api.shapes.inc/v1/chat/completions
